<!DOCTYPE html>
<html>
<link rel="stylesheet" type="text/css" href="test.css" media="screen" />
    <head>
        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.1.min.js"></script>
    </head>
    <body>
        <form onsubmit="sendQuery();return false;">
            <textarea id="textArtistName"></textarea>
                <input class="checkbx" id="checkArtistName" type="checkbox">Artist Name<br>
            <textarea id="textArtistBirth"></textarea>
                <input class="checkbx" id="checkArtistBirth" type="checkbox">Artist Birth-Year<br>
            <textarea id="textArtistDeath"></textarea>
                <input class="checkbx" id="checkArtistDeath" type="checkbox">Artist Death-Year<br>
            <textarea id="textArtistCountry"></textarea>
                <input class="checkbx" id="checkArtistCountry" type="checkbox">Artist country<br>
            <textarea id="textPaintingYear"></textarea>
                <input class="checkbx" id="checkPaintingYear" type="checkbox">Painting Year<br>
            <textarea id="textPaintingName"></textarea>
                <input class="checkbx" id="checkPaintingName" type="checkbox">Painting Name<br>
            <textarea id="textPaintingMedium"></textarea>
                <input class="checkbx" id="checkPaintingMedium" type="checkbox">Painting Medium<br>
            <br>
            <input type="submit" id="submitBut">
        </form>
        <div id="here_table">
        </div>
    <div id="paintingPage" class="modalDialog">
        <div>
            <a href="#close" title="Close" class="close">X</a>
            <div id="paintingPageContent">

            </div>
        </div>
    </div>
    </body>
    <script>
        function loadPopup(data){
            var ajaxurl = 'http://localhost:8585';

            $.post(ajaxurl, data, function (response) {
                var content = '';
                res = JSON.parse(response);
                mytable = "<table border=\"1\">\n";
                for(i=0 ; i < res.length ; i++) {
                    mytable += '<tr>\n';
                    for (var k in res[i]) {

                        mytable += '<td>'+res[i][k]["value"]+'</td>\n';

                    }
                    mytable += '</tr>\n';
                }
                mytable += "</table>\n";
                content += mytable;
                $("#paintingPageContent").html(content);

            });
        }
        function getArtistInfo(artist) {
            var data = {};
            data['type'] = 'artist';
            data['artistURI'] = artist;
            loadPopup(data);
            return false;
        }
        function getPaintingInfo(painting) {
            var data = {};
            data['type'] = 'painting';
            data['paintingURI'] = painting;
            loadPopup(data);
            return false;
        }
        function getMuseumInfo(museum) {
            var data = {};
            data['type'] = 'museum';
            data['museumURI'] = museum;
            loadPopup(data);
            return false;
        }
        function sendQuery()
        {
            //obtaining data
            var data = {};
            data['type'] = 'general';
            if($('#checkArtistName')[0].checked)
            {
                data['artistName'] = $('#textArtistName')[0].value
            }
            if($('#checkArtistBirth')[0].checked)
            {
                data['artistBirth'] = $('#textArtistBirth')[0].value
            }
            if($('#checkArtistDeath')[0].checked)
            {
                data['artistDeath'] = $('#textArtistDeath')[0].value
            }
            if($('#checkArtistCountry')[0].checked)
            {
                data['artistCountry'] = $('#textArtistCountry')[0].value
            }
            if($('#checkPaintingYear')[0].checked)
            {
                data['paintingYear'] = $('#textPaintingYear')[0].value
            }
            if($('#checkPaintingName')[0].checked)
            {
                data['paintingName'] = $('#textPaintingName')[0].value
            }
            if($('#checkPaintingMedium')[0].checked)
            {
                data['paintingMedium'] = $('#textPaintingMedium')[0].value
            }

            var ajaxurl = 'http://localhost:8585';
            $.post(ajaxurl, data, function (response) {

                mytable = "<table border=\"1\">\n";
                res = JSON.parse(response);
                header_created = false;
                for(var i=0 ; i < res.length ; i++){
                    var headers = ['Artist', 'artist_name', 'painting_title', 'painting_image', 'museum_name'];
                    if(! header_created){
                        mytable += '<tr>\n';
                        headers.forEach(function(k, index, array){
                            mytable += '<th>';
                            mytable += k;
                            mytable += '</th>\n';
                        });
                        header_created = true;
                        mytable += '</tr>\n';
                    }
                    mytable += '<tr>\n';
                    headers.forEach(function(kk, index, array){
                        mytable += '<td>';
                        if(kk == "painting_image"){
                            mytable += '<img src="' + res[i][kk]["value"] + '" alt="Smiley face" height="100" width="100">';
                            mytable += '</td>\n';
                        }
                        else if(kk == "artist_name"){
                            mytable += '<a href="#paintingPage" onclick="getArtistInfo(\''+
                                res[i]['Artist']["value"]+'\')">'+
                                res[i][kk]["value"]+'</a>';
                            mytable += '</td>\n';
                        }
                        else if(kk == "Artist"){
                            mytable += res[i]['Artist']["value"];
                            mytable += '</td>\n';
                        }
                        else if(kk == "painting_title"){
                            mytable += '<a href="#paintingPage" onclick="getPaintingInfo(\''+
                                res[i]['painting']["value"]+'\')">'+
                                res[i][kk]["value"]+'</a>';
                            mytable += '</td>\n';
                        }
                        else if(kk == "museum_name"){
                            mytable += '<a href="#paintingPage" onclick="getPaintingInfo(\''+
                                res[i]['museum']["value"]+'\')">'+
                                res[i][kk]["value"]+'</a>';
                            mytable += '</td>\n';
                        }
                    });
                    mytable += '</tr>\n';
                }
                mytable += "</table>\n";
                $('#here_table').html(mytable);
                //$("#here_table").append(mytable);
            });
        }
    </script>
</html>































